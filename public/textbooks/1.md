# 📘 [대백과] 교재 1. Python 기초 (The Python Encyclopedia)

이 교재는 파이썬의 단순 문법을 넘어, 인터프리터의 내부 동작 원리와 고급 디자인 패턴, 그리고 메모리 관리의 정수까지 **120개 문항**의 모든 정답 근거를 다루는 완벽한 기술 명세서입니다.

---

## 1. 파이썬의 핵심 철학 (The Core)
### 🦆 Duck Typing과 EAFP
- **Duck Typing**: "오리처럼 걷고 오리처럼 꽥꽥거리면 오리다." 객체의 상속 관계보다, 그 객체가 어떤 메서드(`__iter__`, `__len__` 등)를 가졌는지가 중요합니다.
- **EAFP**: "허락보다 용서가 쉽다." `if`로 검사하기보다 `try-except`로 지르는 스타일을 선호합니다. Race Condition을 방지하는 효과가 있습니다.

### 🐍 Pythonic Code
- **Explicit is better than implicit**: `from module import *` 보다는 명시적 임포트를 지향합니다.
- **Flat is better than nested**: 과도한 들여쓰기보다는 함수 분리나 `guard clauses`를 사용합니다.

---

## 2. 자료구조와 메모리 (Data Structures & Memory)
### 📦 리스트 (List)
- **구조**: 동적 배열(Dynamic Array)로 구현되어 있습니다. 포인터들의 배열입니다.
- **`sort()`와 Timsort**: 파이썬의 정렬은 **Timsort** 알고리즘을 사용합니다. 이미 정렬된 부분(Run)을 감지하여 병합하므로, 실세계 데이터에서 $O(n)$에 가까운 성능을 냅니다.
- **확장과 슬라이싱**:
    - `data[start:end:step]`: `data[::-1]`은 역순 사본을 뜹니다.
    - `extend()` vs `append()`: `append`는 요소를 그대로 넣고, `extend`는 이터러블을 풀어서 넣습니다.

### 🔑 딕셔너리 (Dictionary)
- **삽입 순서 보장 (3.7+)**: 과거에는 순서가 없었으나, 3.7부터 아키텍처가 변경되어 **삽입된 순서를 보장**합니다. 이는 메모리 최적화 과정(Sparse Array → Dense Array)의 부수 효과입니다.
- **`get(key, default)`**: 키 에러를 방지하는 가장 우아한 방법입니다. `d.get('k', {}).get('sub_k')` 처럼 체이닝이 가능합니다.
- **Comprehension**: `{k:v for k,v in zip(keys, values)}` 형태로 빠른 생성이 가능합니다.

### 🔢 숫자와 캐싱 (Integer Interning)
- **Small Int Cache**: -5부터 256까지의 정수는 파이썬 인터프리터가 시작될 때 미리 만들어둡니다. 따라서 `a = 1`, `b = 1`일 때 `a is b`는 **True**입니다. (같은 메모리 주소)

### 🗑 가비지 컬렉션 (GC)와 WeakRef
- **Reference Counting**: 참조 횟수가 0이 되면 즉시 메모리 해제.
- **Cycles**: 서로를 참조하여 카운트가 0이 안 되는 경우, **Generational GC**가 주기적으로 순환 참조를 찾아내어 제거합니다.
- **`weakref`**: 카운트를 올리지 않고 객체를 참조합니다. 캐시(Cache) 구현 시 대상 객체가 사라지면 캐시도 자동으로 사라지게 할 때 유용합니다.

---

## 3. 함수와 스코프 (Functions & Scopes)
### 🐑 람다 (Lambda)와 늦은 바인딩 (Late Binding)
- **Late Binding**: 클로저에서 변수를 참조할 때, 값이 아닌 *이름*을 참조합니다. 따라서 루프가 끝난 뒤 `lambda`를 실행하면 루프의 마지막 값만 보입니다.
- **해결책**: `lambda x, n=n: x+n` 처럼 기본 인자로 값을 고정시켜야 합니다.

### 🌐 스코프 규칙 (LEGB)
- **Local** → **Enclosing** (상위 함수) → **Global** → **Built-in**.
- **`nonlocal`**: 바로 위 상위 함수의 변수를 수정할 때 사용.
- **`global`**: 전역 변수를 수정할 때 사용.

### ✨ 일급 객체 (First-class Object)
함수를 변수에 담거나, 인자로 넘기거나, 리턴값으로 쓸 수 있습니다. 이를 통해 **Decorator**나 **Closure** 구현이 가능합니다.

---

## 4. 클래스와 메타프로그래밍 (OOP & Metaprogramming)
### 🏭 Metaclass: 클래스를 만드는 공장
- 파이썬의 모든 클래스는 `type`이라는 메타클래스의 인스턴스입니다.
- **용도**: 클래스가 생성될 때 속성을 검증하거나, 메서드를 자동으로 등록하거나, 싱글톤을 강제할 때 (`__new__` 제어) 사용합니다.

### 📜 Descriptor Protocol
속성 접근을 정교하게 제어하는 인터페이스입니다.
- **`__get__`, `__set__`, `__delete__`**를 구현한 객체.
- **우선순위**: Data Descriptor (`__set__` 있음) > Instance Dict (`__dict__`) > Non-data Descriptor (`__get__`만 있음).
- `@property`, `classmethod`, `staticmethod` 모두 디스크립터로 구현되어 있습니다.

### 🧬 MRO (Method Resolution Order)
- **C3 Linearization**: 다중 상속 시 부모 클래스들의 순서를 선형화하는 알고리즘.
- **`super()`**: 단순히 부모를 호출하는 게 아니라, MRO 리스트의 **다음 클래스**를 호출합니다.

### 🏭 `@classmethod` vs `@staticmethod`
- **`@classmethod`**: 첫 인자로 클래스(`cls`)를 받습니다. 상속 시 자식 클래스를 기준으로 동작하므로 **Factory Pattern** 구현에 필수적입니다.
- **`@staticmethod`**: 그냥 이름만 빌려 쓰는 일반 함수입니다. 상속 관계와 무관합니다.

---

## 5. 고급 제어 기능 (Advanced Control)
### 🔀 조건문과 매칭 (Match-Case)
- 3.10에 도입된 구조적 패턴 매칭.
- **Wildcard `_`**: 나머지 모든 경우(default)를 처리합니다.
- **Sequence Pattern**: `case [x, y]:` 처럼 리스트 구조를 분해하며 매칭 가능합니다.

### 🎰 제너레이터 (Generator)와 `yield`
- **Lazy Evaluation**: 데이터를 미리 만들지 않고 필요할 때 하나씩 생성합니다. 메모리를 획기적으로 아낍니다.
- **`yield`**: 함수의 실행을 **일시 정지**하고 값을 반환합니다. 다음 호출 시 정지한 곳부터 재개합니다.

### 🏎 Itertools
- **`combinations(iterable, r)`**: 모든 조합을 생성하되, 리스트를 만들지 않고 이터레이터만 반환하여 OOM을 방지합니다.

---

## 6. 시스템과 라이브러리 (System & Libraries)
### 🧵 GIL (Global Interpreter Lock)
- **한계**: 한 번에 하나의 스레드만 바이트코드를 실행합니다. 멀티코어 CPU를 활용하지 못합니다.
- **이외**: **I/O Bound** 작업(네트워크, 파일) 시에는 GIL을 내려놓으므로 멀티스레딩 효과가 있습니다. **CPU Bound** 작업은 `multiprocessing`을 써야 합니다.
- **Circular Import**: 모듈 A가 B를, B가 A를 임포트하면 교착 상태에 빠집니다. 임포트 구문을 함수 내부로 옮기거나 구조를 개편해야 합니다.

### 🛠 유틸리티 라이브러리
- **`pathlib`**: `os.path`보다 객체지향적이고 직관적인 경로 제어 (`Path / 'sub' / 'file.txt'`).
- **`requests`**: `urllib`보다 사용하기 쉽고, **Connection Pooling**을 통해 HTTP 연결을 재사용하여 성능이 우수합니다.
- **`BeautifulSoup`**: `select()` 메서드로 CSS 선택자를 사용하여 복잡한 트리를 쉽게 탐색합니다.
- **`pickle`**: 파이썬 객체 직렬화. **보안 위험**(Unpickling 시 임의 코드 실행 가능)이 있어 신뢰할 수 없는 데이터에는 절대 금지.

### ✅ 문자열과 포매팅
- **f-string**: `{val:.2f}` 처럼 타입 안전하고 빠른 포매팅. 3.6+ 표준.
- **Raw String (`r''`)**: 백슬래시(`\`)를 이스케이프 문자로 처리하지 않습니다. 정규표현식이나 윈도우 경로에 필수입니다.
- **`split()`**: 인자가 없으면 연속된 공백을 하나로 처리하고 양쪽 공백도 제거합니다. (`text.split(' ')`과 다름)

---

## 7. 컨텍스트 매니저와 예외 처리
- **`with` 문**: `__enter__`와 `__exit__`을 통해 자원을 안전하게 관리합니다.
- **`contextlib.suppress`**: 특정 예외를 묵살하고 싶을 때 `try-pass`보다 우아하게 처리합니다.
- **Multi-except**: `except (ValueError, TypeError):` 처럼 튜플로 묶어 처리 가능합니다.

---

## 8. 기타 핵심 단편 지식
- **`all()`**: 빈 이터러블에 대해 **True**를 반환합니다. (Vacuous Truth: 반례가 없으므로 참)
- **`isdigit()` vs `isnumeric()`**: `isnumeric`은 로마 숫자, 분수, 거듭제곱 문자까지 인식합니다.
- **`functools.lru_cache`**: 함수 결과를 캐싱합니다. 인자가 **Hashable**(불변)해야 딕셔너리 키로 쓸 수 있습니다.
- **`heapq`**: 리스트를 힙으로 관리합니다. `heap[0]`은 항상 최솟값을 보장합니다.

이 교재는 Python 기초 단원의 모든 문항을 커버합니다.