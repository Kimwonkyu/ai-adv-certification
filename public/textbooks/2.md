# 📘 [학습 노트] 교재 2. 데이터 분석 (Foundation to Ultimate Deep Dive)

이 교재는 NumPy와 Pandas의 기본 사용법부터 하드웨어 가속 원리, 정교한 데이터 전처리 및 시각화 기법까지 720개 질문의 정답 근거를 모두 포함합니다.

---

## 1. NumPy: 고성능 벡터 연산의 핵심
### 🛠 기초 인터페이스
- **기본 속성**: `arr.shape` (차원 구조), `arr.dtype` (데이터 타입), `arr.ndim` (차원 수).
- **생성 함수**: 
    - `np.arange(start, stop, step)`: 간격 기반 생성.
    - `np.linspace(start, stop, num)`: 개수 기반 생성. 부동소수점 누적 오차를 방지하여 마지막 끝점을 정확히 표현하는 데 유리합니다.

### ⚡ 하드웨어 연산 원리 (Internal)
- **SIMD (Single Instruction Multiple Data)**: CPU가 하나의 명령어로 여러 데이터를 동시에 연산하는 기술입니다. 파이썬 루프를 제거하고 C 수준에서 처리되어 속도가 비약적입니다.
- **UFuncs (Universal Functions)**: `np.add`, `np.exp` 등 벡터화된 연산을 지원하는 함수들입니다.
- **메모리 레이아웃 (Layout)**:
    - **C-style (Row-major)**: 행 우선 저장.
    - **Fortran-style (Column-major)**: 열 우선 저장. 데이터 접근 방향에 따라 캐시 히트율(Cache Hit Rate)이 달라집니다.
- **`flatten()` vs `ravel()`**: `flatten`은 무조건 복사본(Copy)을 만들고, `ravel`은 가능할 경우 원본의 뷰(View)를 반환하여 메모리를 절약합니다.

---

## 2. Pandas: 대규모 구조화 데이터 활용
### 📂 입출력과 기본 탐색
- **기본**: `pd.read_csv`, `df.to_csv(index=False)`. index를 저장하지 않아야 나중에 파일을 읽을 때 불필요한 행 번호 열이 생기지 않습니다.
- **선택**: `df['col']`은 **Series**를, `df[['col']]`은 **DataFrame** 형태를 유지하여 반환합니다.

### 🏗 고급 데이터 구조
- **Multi-Index**: 인덱스를 계층적으로 구성하여 고차원 데이터를 표현합니다.
- **`stack()` / `unstack()`**: 인덱스와 컬럼 간의 축을 변경하여 데이터를 재구조화(Reshaping)합니다.
- **Resampling**: 시계렬 구간 조정(`resample`). `closed`와 `label` 인자를 통해 구간 경계 처리 논리를 결정합니다.

---

## 3. 정교한 데이터 전처리와 무결성
### 🛡 결측치 및 예외 처리
- **`to_datetime(errors='coerce')`**: 형식이 맞지 않는 문자열을 에러 없이 `NaT`(결측치)로 처리하여 데이터 흐름을 유지합니다.
- **`reset_index(drop=True)`**: 기존 인덱스를 열로 보내지 않고 완전히 지우며, 메모리 효율적인 `RangeIndex`로 일원화합니다.

### 📉 피처 스케일링과 통계적 함정
- **StandardScaler**: 평균 0, 분산 1 변환. 
- **MinMaxScaler**: 0~1 사이 압축.
- **Data Leakage (데이터 누수)**: `fit()`은 반드시 **Train 데이터**에만 수행하고, Test 데이터에는 `transform()`만 적용하여 통계적 오염을 방지해야 합니다.

### 🚩 범주형 데이터와 더미 변수
- **Dummy Variable Trap**: 범주가 $N$개일 때 $N$개를 모두 쓰면 한 컬럼이 나머지 컬럼들로 완벽히 예측(다중공선성)되므로, 반드시 하나를 삭제(`drop_first=True`)하여 $N-1$개만 사용해야 합니다.

---

## 4. 시각화와 차원 축소
### 📐 PCA (주성분 분석) 기술
- **Mean Centering**: PCA 전 데이터의 평균을 0으로 맞춰야 주성분(PC1)이 원점이 아닌 데이터의 최대 분산 방향을 정확히 포착할 수 있습니다. 수리적으로 공분산 행렬 계산의 정확성을 보장합니다.

### 📊 시각화 최적화
- **Overplotting**: 점이 너무 겹칠 때 `alpha`를 낮추거나, **Hexbin Plot**(격자 밀도)을 사용하여 실제 분포 밀도를 정확히 시각화합니다.

이상의 내용을 숙지하면 데이터 분석 단원의 모든 기초 및 hard 난이도 문항을 해결할 수 있습니다.