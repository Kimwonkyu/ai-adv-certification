# 📘 [학습 노트] 교재 2. 데이터 분석 (Advanced Processing)

이 교재는 NumPy와 Pandas의 내부 작동 원리부터 머신러닝 전처리의 통계적 무결성까지, 실무와 시험에서 다루는 고난도 개념을 총망라합니다.

---

## 1. NumPy: 고성능 벡터 연산의 엔진
NumPy의 핵심은 파이썬 루프를 제거하고 하드웨어 수준의 병렬 연산을 수행하는 것입니다.

### ⚡ SIMD와 벡터화 (Vectorization)
- **SIMD (Single Instruction Multiple Data)**: CPU 하드웨어 수준에서 하나의 명령어로 여러 데이터를 동시에 처리하는 기술입니다.
- **UFuncs (Universal Functions)**: `np.add`, `np.exp` 등은 내부적으로 C로 작성되어 데이터 타입 체크 오버헤드를 줄이고 벡터 연산을 수행합니다.

### 📦 메모리 레이아웃과 뷰(View)
- **C-style (Row-major)** vs **Fortran-style (Column-major)**: 행 우선인가 열 우선인가에 따라 인접 메모리 접근 속도(Cache Locality)가 달라집니다.
- **`flatten()` vs `ravel()`**:
    - `flatten()`: 항상 새로운 배열 복사본(Copy)을 생성합니다. (메모리 사용량 증가)
    - `ravel()`: 가능한 경우 원본의 **뷰(View)**를 반환하여 메모리를 절약합니다.
- **`arange()` vs `linspace()`**: `linspace`는 부동 소수점 누적 오차를 방지하여 마지막 끝점(Endpoint)을 정확히 포함해야 하는 수치 계산에 더 유리합니다.

---

## 2. Pandas: 대규모 구조화 데이터 제어
Pandas는 인덱스 기반의 정렬과 고차원 데이터 처리에 최적화되어 있습니다.

### 🏗 계층적 인덱싱 (Multi-Index)
- **구조**: 여러 레벨의 인덱스를 사용하여 고차원 데이터를 2차원 평면에 표현합니다.
- **`stack()` / `unstack()`**: 인덱스와 컬럼 간의 축 변경을 통해 데이터를 재구조화합니다.

### 🔄 데이터 병합과 샘플링
- **`pd.concat(join='outer'|'inner')`**: 
    - `outer`: 합집합. 중복되지 않는 열에는 결측치(NaN)를 채웁니다.
    - `inner`: 교집합. 공통된 열만 남깁니다.
- **`resample()`**: 시계렬 구간 재설정.
    - `closed`: 구간의 어느 쪽을 닫힌 구간으로 볼지 결정.
    - `label`: 어느 쪽 시점의 이름을 결과 레이블로 쓸지 결정.

### 🛡 전처리 무결성
- **`to_datetime(errors='coerce')`**: 형식이 맞지 않는 데이터를 에러 발생 대신 `NaT`(Not a Time) 결측치로 강제 변환하여 파이프라인 중단을 방지합니다.
- **`reset_index(drop=True)`**: 기존 인덱스를 열로 보내지 않고 완전히 삭제하며, 정수 기반의 `RangeIndex`로 일원화하여 조회 속도를 $O(1)$로 최적화합니다.

---

## 3. 통계적 전처리와 피처 엔지니어링
모델의 성능은 데이터의 분포와 품질에 직결됩니다.

### 📉 스케일링 (Scaling)
- **StandardScaler**: 평균 0, 분산 1로 변환. 이상치가 많은 경우 평균과 분산이 왜곡될 수 있습니다.
- **MinMaxScaler**: 0~1 사이로 압축. 데이터의 분포 범위를 고정할 때 유리합니다.
- **주의 (Data Leakage)**: `fit()`은 반드시 **Train 데이터**에만 수행해야 합니다. Test 데이터의 정보를 미리 알게 되면 모델이 미래를 '예닝'하는 오류가 발생합니다.

### 📐 차원 축소와 PCA
- **기하학적 원리**: PCA는 데이터의 분산이 가장 큰 방향을 주성분으로 찾습니다.
- **Mean Centering**: PCA 수행 전 데이터를 원점으로 이동시켜야 첫 번째 주성분(PC1)이 최대 분산 방향을 정확히 가리킬 수 있습니다.

### 🚫 이상치(Outlier)와 결측치
- **IQR (Interquartile Range)**: $Q3 + 1.5 \times IQR$ 보다 크거나 $Q1 - 1.5 \times IQR$ 보다 작은 값을 이상치로 판단하는 통계적 기준입니다.
- **Time-series Leakage**: 시계렬 결측치를 `ffill`로 채울 때, 학습 데이터에서 미래의 정보를 과거로 끌어다 쓰지 않도록 시점(Context) 관리가 필수적입니다.

---

## 4. 데이터 시각화와 분석 기법
- **Overplotting**: 점이 너무 많아 겹칠 때 `alpha`(투명도) 조정이나 **Hexbin Plot**(육각형 격자 밀도)을 사용하여 분포 왜곡을 막습니다.
- **상관관계 (Correlation)**:
    - **Pearson**: 선형적인 관계의 강도를 측정.
    - **Spearman**: 값의 순위(Rank)를 기반으로 하여 비선형적이지만 단조적인 관계를 포착하는 데 우수합니다.

### 🚩 더미 변수의 함정 (Dummy Variable Trap)
- 범주형 데이터를 원-핫 인코딩할 때, $N$개의 카테고리에 대해 $N-1$개의 열만 사용해야 합니다. 마지막 열은 나머지 열들의 합으로 완벽히 예측 가능하므로 **다중공선성(Multicollinearity)** 문제를 일으키기 때문입니다.