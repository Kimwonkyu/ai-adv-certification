# [실습] 변수, 자료형, 조건문, 반복문

## 학습목표
- Python의 기본 자료형을 이해하고 활용할 수 있다
- 변수를 선언하고 사용할 수 있다
- 조건문(if/elif/else)을 활용하여 프로그램 흐름을 제어할 수 있다
- 반복문(for/while)을 사용하여 반복 작업을 수행할 수 있다
- 텍스트 처리에서 기본 문법을 실제로 적용할 수 있다
## 변수와 자료형

Python의 기본 자료형부터 시작해보겠습니다.
# 1. 숫자형 (Number)
count = 42  # 정수 (int)
rating = 4.5  # 실수 (float)

print(count,  rating)
# print(f"정수: {count}, 타입: {type(count)}")
# print(f"실수: {rating}, 타입: {type(rating)}")
# 2. 문자열 (String)
single_quote = '안녕하세요 오늘은 "월급날" 입니다.'
double_quote = "Hello 'World'"

multiline = """여러 줄에 걸친
문자열입니다.
세 번째 줄이에요."""
# 중간 엔터, 공백, 탭 모두 포함

# f-string을 이용한 문자열 포맷팅
name = "성동수"
age = 30
formatted = f"이름: {name}, 나이: {age}세"

print(single_quote)
print()
print(double_quote)
print(multiline)
print(formatted)
# 3. 불린 (Boolean)
is_active = True
is_deleted = False

# 불린 연산
result_and = is_active and is_deleted  # False
result_or = is_active or is_deleted    # True
result_not = not is_deleted           # True

print(f"AND 연산: {result_and}")
print(f"OR 연산: {result_or}")
print(f"NOT 연산: {result_not}")

# Truthy와 Falsy 값들
print(f"빈 문자열: {bool('')}")  # False
print(f"공백 문자열: {bool('')}")  # True
print(f"0.1: {bool(0.1)}")  # False
print(f"빈 리스트: {bool([1,2,3])}")  # False

print('4<10:', 4<10)
# 4. 컬렉션 자료형

# 리스트 (List) - 순서가 있고, 변경 가능
keywords = ['AI', '머신러닝', '딥러닝', '자연어처리']
numbers = [1, 2, 3, 4, 5]
mixed = ['문자', 123, True, 4.5]  # 다양한 타입 저장 가능

print(f"키워드 목록: {keywords}")
print(f"첫 번째 키워드: {keywords[0]}")
print(f"마지막 키워드: {keywords[-1]}")
print(f"리스트 길이: {len(keywords)}")
# append와 extend: 리스트에 값 추가하기

# append: 리스트에 요소 하나를 '통째로' 추가
fruits = ['사과', '바나나']
fruits.append(['오렌지','포도'])
print(f"append 사용 후: {fruits}")  # ['사과', '바나나', '오렌지']

# extend: 리스트에 여러 요소(다른 리스트 등)를 '각각' 추가
fruits2 = ['사과', '바나나']
fruits2.extend(['오렌지', '포도'])
print(f"extend 사용 후: {fruits2}")  # ['사과', '바나나', '오렌지', '포도']

# List : +연산 가능
fruits3 = ['사과', '바나나'] + ['오렌지', '포도']

# 차이점 예시
a = [1, 2, 3]
a.append([4, 5])
print(f"append로 리스트 추가: {a}")  # [1, 2, 3, [4, 5]]

b = [1, 2, 3]
b.extend([4, 5])
print(f"extend로 리스트 추가: {b}")  # [1, 2, 3, 4, 5]
# 튜플 (Tuple) - 순서가 있고, 변경 불가능
coordinates = (37.5665, 126.9780)  # 위도, 경도
rgb = (255, 128, 0)
single_tuple = (42,)  # 단일 요소 튜플은 쉼표 필요

print(f"좌표: {coordinates}")
print(f"위도: {coordinates[0]}, 경도: {coordinates[1]}")

# 튜플 언패킹
lat, lng = coordinates
print(f"언패킹된 위도: {lat}, 경도: {lng}")
# 딕셔너리 (Dictionary) - 키-값 쌍
user = {
    'name': '신동수',
    'age': 30,
    'department': 'AI개발팀',
    'skills': ['Python', 'Java', 'SQL']
}

print(f"사용자 정보: {user}")
print(f"이름: {user['name']}")
print(f"부서: {user.get('department')}")
print(f"직급: {user.get('position', '미정')}")  # 기본값 설정

# 딕셔너리 메서드
print(f"키 목록: {list(user.keys())}")
print(f"값 목록: {list(user.values())}")
# 딕셔너리에 값 추가하기
user['position'] = '주임연구원'  # 새로운 키-값 쌍 추가
print(f"직급 추가 후: {user}\n")

# 여러 값 한 번에 추가 (update 사용)
user.update({'email': 'shindongsu@example.com', 'location': '서울'})
print(f"여러 값 추가 후: {user}\n")

# 딕셔너리에서 값 지우기
del user['age']  # 특정 키 삭제
print(f"'age' 삭제 후: {user}\n")

removed_skill = user['skills'].pop()  # 리스트처럼 값에서 pop 사용 가능
print(f"skills에서 pop된 값: {removed_skill}, 남은 skills: {user['skills']}\n")

# pop 메서드로 딕셔너리에서 키-값 쌍 삭제
department = user.pop('department')
print(f"department 삭제 후: {user}, 삭제된 값: {department}\n")
## 문자열 처리

텍스트 분석에서 가장 중요한 문자열 처리 방법들을 살펴보겠습니다.
sample_text = "  Python으로 자연어처리를 배워보세요!  "
'Python' in sample_text
# 문자열 기본 메서드
sample_text = "  Python으로 자연어처리를 배워보세요!  "

print(f"원본: '{sample_text}'")
print(f"소문자: '{sample_text.lower()}'")
print(f"대문자: '{sample_text.upper()}'")
print(f"공백 제거: '{sample_text.strip()}'")
print(f"길이: {len(sample_text)}")
print(f"'Python' 포함: {('Python' in sample_text)}")


print(f"'python' 포함 (대소문자 무시): {'python' in sample_text.lower()}")
# 문자열 분할과 결합
sentence = "Python은 간단하고 강력한 프로그래밍 언어입니다"
words = sentence.split()  # 공백으로 분할

print(f"원문: {sentence}")
print(f"단어 분할: {words}")
print(f"단어 개수: {len(words)}")

# 특정 구분자로 분할
csv_data = "이름,나이,부서,직급"
columns = csv_data.split(',')
print(f"CSV 컬럼: {columns}")

# 문자열 결합
joined = " ".join(words[:3])  # 처음 3개 단어만
print(f"결합된 문자열: {joined}")
example_list = ['이름', '나이', '부서', '직급']
print('\n\n'.join(example_list))
# 문자열 치환과 검색
text = "머신러닝과 딥러닝은 AI의 핵심 기술입니다. 머신러닝을 먼저 배우세요."

# 치환
replaced = text.replace("머신러닝", "ML").replace('AI','인공지능')
print(f"치환 결과: {replaced}")

# 검색
index = text.find("딥러닝")
print(f"'딥러닝' 위치: {index}")

# 개수 세기
count = text.count("머신러닝")
print(f"'머신러닝' 출현 횟수: {count}")

# 시작/끝 확인
print(f"'머신'으로 시작: {text.startswith('머신')}")
print(f"'세요.'로 끝남: {text.endswith('세요.')}")
print(f"기술을 포함함: {'기술' in text}")
## 조건문으로 데이터 분류하기

텍스트 데이터를 조건에 따라 분류하는 방법을 배워보겠습니다.
info= "FEMALE"

if 'MALE' in info:
    print("Room 1 Key")
    
if 'FEMALE' in info:
    print('Room 2 Key')

score = 80

if score>=90:
    print("Great")
elif score>=80:
    print('Not Bad')
else:
    print('Okay')
'a'*10
# 텍스트 길이에 따라 분류
text='자연어처리는 컴퓨터가 인간의 언어를 이해하고 처리할 수 있도록 하는'

length = len(text)
if length < 10:
    classification = "짧음"
elif length < 50:
    classification = "보통"
elif length < 200:
    classification = "긺"
else:
    classification = "매우 긺"
print(f"길이 {length:3d}: {classification} - {text[:30]}...")

# 텍스트 길이에 따라 분류
texts = [
    "안녕",
    "Python 프로그래밍을 배우고 있습니다",
    "자연어처리는 컴퓨터가 인간의 언어를 이해하고 처리할 수 있도록 하는 인공지능의 한 분야입니다. 텍스트 마이닝, 감정 분석, 기계 번역 등 다양한 응용 분야가 있습니다.",
    "매우 긴 텍스트의 예시입니다. " * 20
]

for text in texts:
    length = len(text)
    if length < 10:
        classification = "짧음"
    elif length < 50:
        classification = "보통"
    elif length < 200:
        classification = "긺"
    else:
        classification = "매우 긺"
    print(f"길이 {length:3d}: {classification} - {text[:30]}...")
    #             3d: 3칸으로 길이 통일


comments = [
    "이 제품 정말 좋아요!",
    "별로예요. 실망했습니다.",
    "좋은 점도 있고 나쁜 점도 있네요",
    "배송이 빨라서 좋았는데, 포장이 좀 아쉬웠어요. 그래도 제품 자체는 만족합니다.",
    "주문했어요"
]

positive_words = ['좋', '최고', '훌륭', '만족', '추천']
negative_words = ['나쁘', '싫', '별로', '실망', '불만']

for comment in comments:
    c = comment.strip().lower()
    # 공백을 제거하고 소문자로 수정
    has_positive = False
    has_negative = False
    
    for word in positive_words:
        if word in c:
            has_positive = True
            break
            # 반복문을 더 진행하지 않고 종료

    for word in negative_words:
        if word in c:
            has_negative = True
            break

    if has_positive and not has_negative:
        sentiment = "긍정"
    elif has_negative and not has_positive:
        sentiment = "부정"
    elif has_positive and has_negative:
        sentiment = "중립"
    else:
        sentiment = "판단불가"

    length = len(c)
    if length > 100:
        detail_level = "상세함"
    elif length > 20:
        detail_level = "보통"
    else:
        detail_level = "간단함"

    print(f"댓글: {comment}")
    print(f"  분석: {{'sentiment': '{sentiment}', 'detail_level': '{detail_level}', 'length': {length}}}\n")

## 반복문으로 대량 처리하기

대량의 텍스트 데이터를 효율적으로 처리하는 방법을 배워보겠습니다.
# for 반복문 기본 사용법
keywords = ['python', 'java', 'javascript', 'go', 'rust']

print("=== 기본 for 반복문 ===")
for keyword in keywords:
    print(f"언어: {keyword.upper()}")

print("\n=== 인덱스와 함께 ===")
for i, keyword in enumerate(keywords):
    print(f"{i}. {keyword}")

print("\n=== range 활용 ===")
for i in range(3):
    print(f"처음 3개: {keywords[i]}")
keywords = ['python', 'java', 'javascript', 'go', 'rust']
ratings = ['A','B','C','D','E']

for rating, keyword in zip(keywords, ratings):
    print(rating, keyword)
# 실제 텍스트 데이터 처리
news_titles = [
    "삼성SDS, 차세대 AI 기반 물류 플랫폼 공개",
    "삼성SDS, 클라우드 매출 두 자릿수 성장 기록",
    "삼성SDS, 기업용 생성형 AI 서비스 상용화",
    "삼성SDS, 글로벌 IT 아웃소싱 계약 확대",
    "삼성SDS, 양자보안 기술 적용한 금융 솔루션 출시",
    "삼성전자, 새로운 AI 칩셋 개발 성공",
    "네이버, 클로바 서비스 대폭 업데이트",
    "카카오, 블록체인 기반 새로운 서비스 출시",
    "LG전자, 스마트홈 솔루션 확장",
    "현대자동차, 자율주행 기술 특허 출원"
]

# 키워드 추출 및 통계
company_count = {}
tech_keywords = ['AI', '블록체인', '자율주행', '스마트홈', '클로바']
tech_mentions = []

for title in news_titles:
    # 회사명 추출 (첫 번째 단어가 회사명이라고 가정)
    company = title.split(',')[0]
    company_count[company] = company_count.get(company, 0) + 1
    # 없으면 1, 있으면 1 더하기
    
    # 기술 키워드 확인
    for keyword in tech_keywords:
        if keyword in title:
            tech_mentions.append((title, keyword))

print("=== 회사별 뉴스 개수 ===")
for company, count in company_count.items():
    print(f"{company}: {count}개")

print("\n=== 기술 키워드 언급 ===")
for title, keyword in tech_mentions:
    print(f"'{keyword}' in: {title}")
for i in company_count:
    print(i, company_count[i])
# while 반복문 활용
sample_texts = [
    "Python은 배우기 쉬운 언어입니다",
    "데이터 분석에 많이 사용됩니다",
    "AI 개발에도 활용됩니다",
    "웹 개발도 가능합니다",
    "자동화 스크립트 작성에 좋습니다",
    "오픈소스 라이브러리가 풍부합니다",
    "커뮤니티가 활성화되어 있습니다"
]

batch_size = 3
processed = []
index = 0

while index < len(sample_texts):
    batch = sample_texts[index:index + batch_size]
    # sample_texts 중 3개 선택
    
    # 0:3 -- 0~2, 3:6, 6:9
    print(f"\n=== 배치 {index//batch_size + 1} (인덱스 {index}-{index + len(batch) - 1}) ===")
    for i, text in enumerate(batch):
        clean_text = text.strip().lower()
        word_count = len(clean_text.split())
        processed.append({
            'original': text,
            'cleaned': clean_text,
            'word_count': word_count
        })
        print(f"  {index + i + 1}. {text} -> {word_count}개 단어")
    index += batch_size

print(f"\n총 {len(processed)}개 텍스트 처리 완료")
index
## 텍스트 키워드 필터

지금까지 배운 내용을 종합하여 텍스트 키워드 필터를 만들어보겠습니다.   

**이번 실습에서는 함수가 등장합니다.**
**함수는 코드의 재사용성을 높이고, 반복 실행을 용이하게 하는 방법으로 다음 실습에서 알아보겠습니다.**
def add_keywords(keyword_list, new_keywords):
    """키워드 리스트에 새 키워드 추가"""
    if isinstance(new_keywords, str):
        new_keywords = [new_keywords]
    keyword_list.extend(new_keywords)
    return keyword_list

def contains_keyword(text, keywords, case_sensitive=False):
    """텍스트에 키워드가 포함되어 있는지 확인"""
    if not case_sensitive:
        text = text.lower()
        lowered_keywords = []
        for k in keywords:
            lowered_keywords.append(k.lower())
        keywords = lowered_keywords
    found_keywords = []
    for keyword in keywords:
        if keyword in text:
            found_keywords.append(keyword)
    return found_keywords

def filter_texts(texts, keywords, mode='include', case_sensitive=False, stats=None):
    """텍스트 목록을 키워드로 필터링

    Args:
        texts: 텍스트 목록
        keywords: 키워드 리스트
        mode: 'include' (키워드 포함된 것만), 'exclude' (키워드 제외)
        case_sensitive: 대소문자 구분 여부
        stats: 통계 딕셔너리 (선택)
    """
    if stats is None:
        stats = {'total_processed': 0, 'matched': 0, 'filtered': 0}
    filtered = []
    for text in texts:
        stats['total_processed'] += 1
        found = contains_keyword(text, keywords, case_sensitive)
        if found:
            stats['matched'] += 1
            if mode == 'include':
                filtered.append({
                    'text': text,
                    'matched_keywords': found
                })
                stats['filtered'] += 1
        else:
            if mode == 'exclude':
                filtered.append({
                    'text': text,
                    'matched_keywords': []
                })
                stats['filtered'] += 1
    return filtered, stats

# 키워드 리스트 정의
keywords = ['AI', '머신러닝', '딥러닝', '데이터', '파이썬']

# 대소문자 구분 없이 키워드 저장
case_sensitive = False
if not case_sensitive:
    keywords_lower = []
    for k in keywords:
        keywords_lower.append(k.lower())
else:
    keywords_lower = keywords

print(f"키워드: {keywords}")

# 샘플 데이터로 테스트
sample_documents = [
    "Python으로 데이터 분석을 시작해보세요",
    "자바스크립트 웹 개발 가이드",
    "머신러닝과 AI의 미래",
    "데이터베이스 설계 원칙",
    "딥러닝을 이용한 이미지 인식",
    "네트워크 보안 기초",
    "파이썬 데이터 시각화 라이브러리",
    "클라우드 컴퓨팅 서비스 비교",
    "AI 윤리와 책임",
    "블록체인 기술 동향"
]

# 통계 딕셔너리 초기화
stats = {'total_processed': 0, 'matched': 0, 'filtered': 0}

# 기술 관련 문서만 필터링
filtered_docs, stats = filter_texts(sample_documents, keywords, mode='include', case_sensitive=case_sensitive, stats=stats)

print("=== 기술 키워드가 포함된 문서 ===")
for i, doc in enumerate(filtered_docs, 1):
    print(f"{i}. {doc['text']}")
    print(f"   매칭된 키워드: {', '.join(doc['matched_keywords'])}\n")

print(f"=== 필터링 통계 ===")
for key, value in stats.items():
    print(f"{key}: {value}")

